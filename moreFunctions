//LOCALIZATION
var loadMap = function () {

    map.locate({setView: true, watch: true})
        .on('locationfound', function(e){
            var marker = L.marker([e.latitude, e.longitude]).bindPopup('Você está aqui!');
            var circle = L.circle([e.latitude, e.longitude], e.accuracy/2, {
                weight: 1,
                color: 'blue',
                fillColor: '#cacaca',
                fillOpacity: 0.2
            });
            map.addLayer(marker);
            map.addLayer(circle);
        })
       .on('locationerror', function(e){
            console.log(e);
            alert("Permissão negada");
        });
};

loadMap();


// GET LAT LONG
map.on('click', function(e) {
    alert("Lon, Lat : " + e.latlng.lng + " " + e.latlng.lat)
}); 


// SIMPLE MARKERS
function addGeoJsonLayerMarkers(data) {
    var markers = L.geoJSON(false, {
        onEachFeature: function (feature, layer) {
            feature.layer = layer;
            layer.bindPopup(feature.properties.nome);
        }
    });
    markers.addData(data).addTo(map);
    controlLayers.addOverlay(markers, 'Pontos');
}